Создаем новый файл для этой объемной и очень важной темы. Разместим его в той же папке, где и HTML-хелперы.

### **Где создать файл**

- **Папка:** `ASP.NET/Теория/MVC pattern/View/Helpers`
    
- **Имя файла:** `Тег-хелперы (Tag Helpers).md`
    

### **Содержимое конспекта**

Скопируй этот блок целиком:

Markdown

````
#  (Tag Helpers)

Тег-хелперы позволяют серверному коду участвовать в создании и рендеринге HTML-элементов в файлах Razor. Они предоставляют HTML-подобный синтаксис, что делает разметку более читаемой по сравнению с классическими HTML-хелперами

## Импорт и подключение

**Подключение**
  Для использования тег-хелперов их необходимо явно импортировать с помощью директивы `@addTagHelper`. Обычно это делается глобально в служебном файле *_ViewImports.cshtml*

**Синтаксис импорта**
  `@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers` — эта строка подключает все встроенные тег-хелперы из стандартной сборки ASP.NET Core

## Значения по умолчанию и привязка

**Атрибут asp-for**
  Является основным механизмом для строго типизированной привязки. Когда применяется синтаксис `<input asp-for="Name" />`, тег-хелпер автоматически генерирует атрибуты `id`, `name`, а также подставляет *текущее значение* из свойства `Name` переданной модели. Также на основе атрибутов валидации в модели генерируются `data-val` атрибуты для клиентской проверки

## Распространенные Тег-хелперы

### Форма (form)
Генерирует атрибут `action` на основе указанного контроллера и метода, а также *автоматически внедряет скрытое поле* с Anti-Forgery токеном для защиты от межсайтовой подделки запросов (CSRF)

```cshtml
<form asp-controller="Home" asp-action="SaveData" method="post">
    </form>
````

### Ссылки (a)

Автоматически строит корректный URL с учетом текущей конфигурации системы маршрутизации

Razor CSHTML

```
<a asp-controller="Product" asp-action="Details" asp-route-id="@Model.Id">Подробнее</a>

<a asp-area="Admin" asp-controller="Users" asp-action="Index">Панель администратора</a>
```

**asp-area**

Указывает область (Area) маршрутизации, в которой находится целевой контроллер. Используется для разделения крупного приложения на логические модули (например, выделение панели администратора в отдельную подсистему)

### Выпадающий список (select)

Создает элемент `<select>` и связывает его с коллекцией элементов (`SelectListItem`) и выбранным значением

Razor CSHTML

```
<select asp-for="SelectedRoleId" asp-items="ViewBag.RolesList">
    <option value="">Выберите роль...</option>
</select>
```

## Подключение скриптов с фолбэком (script)

Тег-хелпер для `<script>` позволяет безопасно использовать CDN (Content Delivery Network), предоставляя механизм отката к локальному файлу, если внешний сервер недоступен

Razor CSHTML

```
<script src="[https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js](https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js)"
        asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
        asp-fallback-test="window.jQuery"
        crossorigin="anonymous">
</script>
```

**asp-fallback-test**

Содержит JavaScript-выражение. Если скрипт из CDN загрузился успешно, это выражение вернет `true` (например, объект `window.jQuery` будет существовать). Если вернется `false`, ASP.NET Core подгрузит локальный файл, указанный в `asp-fallback-src`

**asp-src-include**

Позволяет подключить сразу несколько скриптов по маске (например, `asp-src-include="~/js/**/*.js"`), избегая ручного перечисления каждого файла из папки

## Кэширование фрагментов (cache)

Тег-хелпер `<cache>` позволяет кэшировать содержимое внутри тега прямо в оперативной памяти сервера. Это полезно для фрагментов страницы, генерация которых требует тяжелых вычислений или сложных запросов к базе данных (например, меню категорий товаров или блок глобальной статистики)

**expires-after**

Указывает структуру `TimeSpan`, через который кэш устареет (относительное время)

_Пример:_ `<cache expires-after="@TimeSpan.FromMinutes(10)">`

**expires-on**

Указывает точную дату и время `DateTime`, когда кэш должен быть принудительно очищен (абсолютное время)

**vary-by-user**

Логический атрибут. Если равен `true`, сервер будет хранить отдельную версию кэшированного блока для каждого авторизованного пользователя

**vary-by-query**

Кэширует разные версии блока в зависимости от значений переданных параметров в строке запроса

_Пример:_ `<cache vary-by-query="categoryId">` создаст разные кэши для URL с `?categoryId=1` и `?categoryId=2`

---

## Разница между Тег-хелперами и HTML-хелперами

Оба механизма выполняют одну задачу — серверную генерацию разметки, но имеют разные парадигмы использования и целевое назначение

### HTML-хелперы (HTML Helpers)

**Преимущества**

Имеют строгую типизацию и предоставляют полный функционал C# прямо в процессе вызова метода

Идеально подходят для создания сложных пользовательских компонентов, где программной логики (условий, циклов, конкатенации) больше, чем самой HTML-разметки

**Недостатки**

Синтаксис выглядит как вызов метода C# внутри верстки, что нарушает визуальную структуру HTML

Усложняет работу фронтенд-разработчикам (верстальщикам), так как они не могут использовать стандартные инструменты дизайна и редактирования тегов

### Тег-хелперы (Tag Helpers)

**Преимущества**

Выглядят как обычные HTML-теги, что делает код чистым и естественным для восприятия

Позволяют фронтенд-разработчикам легко стилизовать и модифицировать интерфейс без глубоких знаний синтаксиса Razor

Обеспечивают богатый IntelliSense непосредственно внутри атрибутов тегов

**Недостатки**

Не всегда очевидно при первом взгляде на код, какие атрибуты обрабатываются на сервере (движком Razor), а какие отправляются клиенту в первозданном виде

Менее удобны для ситуаций, где требуется процедурно сгенерировать сложную вложенную структуру тегов через C# логику

```

---
С темой передачи данных и хелперами во View мы закончили. Что берем следующим из твоего `Todo.md`? Можем вернуться к Pipeline/Middleware, или перейти к Entity Framework, если это есть в планах.
```