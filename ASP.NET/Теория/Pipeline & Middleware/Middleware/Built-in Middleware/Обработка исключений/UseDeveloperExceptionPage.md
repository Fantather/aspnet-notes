**UseDeveloperExceptionPage** — это встроенное промежуточное ПО (Middleware) в ASP.NET Core, предназначенное для перехвата необработанных исключений в конвейере обработки запросов и генерации детализированной HTML-страницы с информацией об ошибке.

## Основные характеристики
**Назначение**
  Отображение трассировки стека (stack trace), параметров запроса, заголовков и куки для упрощения отладки во время разработки.

**Механизм работы**
  Компонент устанавливается в конвейер и "оборачивает" выполнение последующих middleware. При возникновении исключения он перехватывает его, останавливает дальнейшую обработку и формирует ответ с кодом состояния 500.

**Автоматическая регистрация**
  Начиная с .NET 6, при использовании `WebApplication.CreateBuilder`, этот middleware регистрируется автоматически, если переменная окружения `ASPNETCORE_ENVIRONMENT` установлена в значение `Development`. Явный вызов требуется только для специфической настройки.

## Структура страницы ошибки

Страница разработчика содержит вкладки с детальной информацией:

**Stack Trace**
  Показывает место возникновения исключения в коде с подсветкой синтаксиса (если доступны PDB-файлы).

**Query**
  Отображает параметры строки запроса (Query String).

**Cookies**
  Список всех куки, переданных в запросе.

**Headers**
  HTTP-заголовки запроса.

**Routing**
  Информация о выбранной конечной точке (Endpoint) и параметрах маршрутизации.

## Правила использования

**Порядок регистрации**
  Должен быть зарегистрирован как можно раньше в конвейере (обычно первым), чтобы иметь возможность перехватывать исключения из любого последующего middleware.

**Ограничение среды**
  Использование строго ограничено средой разработки (`IsDevelopment()`).
  *Внимание:* Включение этой страницы в *Production* является критической уязвимостью безопасности, так как раскрывает внутреннюю структуру приложения и фрагменты исходного кода злоумышленникам.

## Пример реализации
```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

// Проверка среды строго обязательна
if (app.Environment.IsDevelopment())
{
    // Явный вызов с настройками (без настроек в .NET 6+ этот вызов избыточен)
    var developerPageOptions = new DeveloperExceptionPageOptions
    {
        SourceCodeLineCount = 5 // Показывает 5 строк кода до и после ошибки
    };
    
    app.UseDeveloperExceptionPage(developerPageOptions);
}

// Терминальный middleware, который гарантированно выбросит исключение
app.Run(context =>
{
    // Выбрасываем исключение для проверки работы middleware
    throw new Exception("Test Exception for Developer Page");
});

app.Run(); // Этот код технически необходим для запуска приложения, но логика сюда не дойдет из-за throw выше
```

## Отличие от UseExceptionHandler

**UseDeveloperExceptionPage**
Генерирует технический HTML для разработчика. Используется только локально.

**UseExceptionHandler**
Перенаправляет пользователя на дружелюбную страницу ошибки (например, `/Home/Error`). Используется в _Production_ для обработки исключений без раскрытия деталей реализации.





