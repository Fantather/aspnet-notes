`HttpContext` — это объект, инкапсулирующий всю специфическую информацию об отдельном HTTP-запросе и формируемом HTTP-ответе.

Экземпляр `HttpContext` создается веб-сервером (например, Kestrel) в момент получения сетевого запроса и уничтожается после отправки ответа клиенту. *Жизненный цикл этого объекта строго привязан к времени обработки одного запроса.*

Важно учитывать, что `HttpContext` **не является потокобезопасным (not thread-safe)**. *Его нельзя передавать в фоновые потоки или сохранять в статических полях, так как это приведет к непредсказуемому поведению и состоянию гонки.*


## Состав HttpContext
Объект действует как агрегатор, предоставляя доступ к следующим ключевым свойствам:

**HttpRequest (Request)**
  Предоставляет доступ только для чтения к входящим данным. Содержит заголовки, тело запроса (Body Stream), строку запроса (QueryString), куки и информацию о маршруте (Path).

**HttpResponse (Response)**
  Интерфейс для формирования исходящего ответа. Позволяет устанавливать статус-код (например, 200 или 404), добавлять заголовки и писать данные в выходной поток (Body Stream). *Важно: запись в `Response` возможна только до того, как отправка заголовков началась.*

**ClaimsPrincipal (User)**
  Содержит данные об аутентифицированном пользователе. *Здесь хранятся Claims (утверждения), такие как ID пользователя, роли и права доступа, заполняемые middleware аутентификации.*

**IDictionary<object, object> (Items)**
  Коллекция типа ключ-значение для обмена данными между компонентами middleware в рамках одного запроса. *Это наиболее корректный способ передать временные данные (например, результат валидации) из одного middleware в другой без изменения сигнатуры методов.*

**IServiceProvider (RequestServices)**
  Локальный (Scoped) контейнер внедрения зависимостей. *Через него разрешаются сервисы, зарегистрированные со