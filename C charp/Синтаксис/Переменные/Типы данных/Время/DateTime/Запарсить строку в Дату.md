1. Разбор `DateTime.TryParseExact`

Сигнатура метода выглядит (упрощённо) так:
```csharp
public static bool TryParseExact(
    string?      s,
    string       format,
    IFormatProvider? provider,
    DateTimeStyles styles,
    out DateTime result
);
```

То есть у него пять параметров:

1. **`s`** (`input`) — строка, которую мы пытаемся распарсить, например `"22.12.2021"`
2. 
3. **`format`** (`"dd.MM.yyyy"`) — шаблон, которому должна соответствовать строка:
    - `dd` — две цифры дня,
    - `MM` — две цифры месяца,
    - `yyyy` — четыре цифры года, а между ними точка.

4. **`provider`** (`CultureInfo.InvariantCulture`) — культура (набор правил), по которым читаются числа, разделители дат, десятичные точки и т. д.
    - `InvariantCulture` гарантирует, что метод ждёт именно точку `.` как разделитель (независимо от региональных настроек ОС)

5. **`styles`** (`DateTimeStyles.None`) — дополнительные опции, как именно парсить (например, разрешать пробелы вокруг строки, относиться к отсутствию временной зоны и т. д.).
    - `None` означает “никаких особых требований”.

6. **`out DateTime result`** (`out var date`) — результат парсинга.
    - Если метод вернёт `true`, в `date` попадёт разобранная дата.


Метод возвращает `bool`:
- **`true`**, если строка точно соответствует формату и является корректной датой.
- **`false`**, если парсинг не удался (например, день 32, или формат не совпал, или строка `null`).

Пример:
```csharp
if (!DateTime.TryParseExact(input, "dd.MM.yyyy",
        CultureInfo.InvariantCulture,
        DateTimeStyles.None,
        out var date))
{
    Console.WriteLine("Неверный формат даты или дата не существует");
    return;
}
// Здесь date — ваш DateTime-объект
```

---

## 2. Что такое `out var date`

- `out` указывает, что параметр передаётся по ссылке для **вывода** результата.
    
- `var date` — сокращённая запись вместо `DateTime date`. Компилятор сам выведет тип `DateTime` по сигнатуре метода.

---

## 3. Выражение `date.Month switch { … }`

Это **синтаксис C# 8+**, называемый **switch-выражением**. Он позволяет в одну строку выбрать значение в зависимости от `date.Month`. Разберём:

```csharp
string season = date.Month switch
{
    12 or 1 or 2   => "Winter",
    3  or 4 or 5   => "Spring",
    6  or 7 or 8   => "Summer",
    9  or 10 or 11 => "Autumn",
    _              => throw new InvalidOperationException()
};
```

- `date.Month` даёт число от 1 до 12
- После `switch` идёт список **паттернов** (шаблонов) и `=>` с возвращаемым значением.
    - `12 or 1 or 2 => "Winter"` означает: если `Month` равен 12, 1 или 2, то результатом будет строка `"Winter"`.
    - `3 or 4 or 5 => "Spring"` — для месяцев 3, 4, 5 возвращаем `"Spring"`.
    - И так далее.

- Символ `_` в последней строке — это “любое другое значение” (аналог `default` в классическом `switch`). Здесь мы кидаем исключение, потому что месяц всегда от 1 до 12, и другие значения невозможны.

В итоге в переменной `season` будет нужное название сезона