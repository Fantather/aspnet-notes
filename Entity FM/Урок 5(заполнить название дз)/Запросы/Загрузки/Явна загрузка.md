![[Pasted image 20250911194658.png]]

- **Явная загрузка** — это способ вручную подгрузить связанные данные, если они **не были загружены изначально** (без [[Entity FM/Урок 5(заполнить название дз)/Запросы/Include]] и без [[Ленивая загрузка|Lazy Loading]]).
    
- Используется, когда нужна **большая гибкость**: ты сам решаешь, какие связи и когда загружать.

## Как включить явную загрузку

EF Core предоставляет метод `Entry()` и `Collection()` / `Reference()`:

###  Загрузка связанных сущностей **один-к-одному**
```c#
var order = context.Orders.First();

context.Entry(order)
       .Reference(o => o.Customer) // навигационное свойство
       .Load();

```
![[Pasted image 20250911195653.png]]
Здесь `Customer` подгрузится только после вызова `.Load()`.
## Загрузка связанных сущностей **один-ко-многим**

```c#
var order = context.Orders.First();

context.Entry(order)
       .Collection(o => o.OrderItems) // коллекция
       .Load();

```
Теперь `order.OrderItems` загружены.
![[Pasted image 20250911195501.png]]

## С фильтрацией при явной загрузке
Можно ограничить, какие связанные сущности будут подгружены:
Используется [[Entity FM/Урок 5(заполнить название дз)/Круд операций#^where|Where]]
```c#
context.Entry(order)
       .Collection(o => o.OrderItems)
       .Query()                 // вместо Load → Query()
       .Where(oi => oi.Price > 100)
       .Load();

```
Загрузятся только те `OrderItems`, где цена больше 100.
![[Pasted image 20250911194704.png]]
Только игроки где айди игроков совпадает с айди первой команды

#резюме 
используем когда
- Когда не всегда нужны все связанные данные, но в отдельных случаях их надо подгрузить.
    
- Когда нужно подгрузить данные **с фильтрацией** (`Query()` + `Where`).

