	Ниже представлены три варианта реализации. Выбор варианта зависит от сложности логики и требований к чистоте кода


### Базовый (Минимальный)
**Подход:** Контекст вынесен в отдельный файл. Логика (`useState`) и оптимизация (`useMemo`) остаются внутри родительского компонента (`App`). Хук `useContext` используется напрямую.

**Когда использовать**
- Маленькие приложения.
- Логика состояния очень простая (вкл/выкл)
- Нет необходимости скрывать использование контекста

#### Файл: `context/AuthContext.js`
Просто создание "канала связи"
``` JavaScript
import { createContext } from 'react';

// Заглушка для автодополнения
const AuthContext = createContext({
  isLoggedIn: false,
  onLogin: () => {},
  onLogout: () => {}
});

export default AuthContext;
```

#### Файл: `App.jsx`
Родитель управляет состоянием и мемоизирует значение
``` JavaScript
import React, { useState, useMemo } from 'react';
import AuthContext from './context/AuthContext';
import Header from './components/Header';

export default function App() {
  const [isLoggedIn, setIsLoggedIn] = useState(false);

  const loginHandler = () => setIsLoggedIn(true);
  const logoutHandler = () => setIsLoggedIn(false);

  // useMemo предотвращает лишние ререндеры потребителей
  const authContextValue = useMemo(() => ({
    isLoggedIn,
    onLogin: loginHandler,
    onLogout: logoutHandler
  }), [isLoggedIn]);

  return (
    <AuthContext.Provider value={authContextValue}>
      <Header />
      <main>Контент</main>
    </AuthContext.Provider>
  );
}
```



### Стандартный (С паттернами Provider и Hook)
**Подход:** Логика выносится из `App` в специальный компонент `AuthContextProvider`. Используется простой `useState`. Добавляется кастомный хук `useAuth` для удобства

**Когда использовать**
- Большинство средних приложений
- Нужно очистить `App.jsx` от логики
- Логика изменения состояния линейная (простые функции)

#### Файл: `store/AuthContext.js`
Содержит: Контекст + Провайдер (на `useState`) + Хук
```JavaScript
import React, { createContext, useState, useContext, useMemo } from 'react';

// 1. Контекст
const AuthContext = createContext({
  isLoggedIn: false,
  onLogin: () => {},
  onLogout: () => {}
});

// 2. Провайдер с логикой на useState
export const AuthContextProvider = ({ children }) => {
  const [isLoggedIn, setIsLoggedIn] = useState(false);

  const loginHandler = () => {
    localStorage.setItem('isLoggedIn', '1');
    setIsLoggedIn(true);
  };

  const logoutHandler = () => {
    localStorage.removeItem('isLoggedIn');
    setIsLoggedIn(false);
  };

  // Мемоизация значения
  const contextValue = useMemo(() => ({
    isLoggedIn,
    onLogin: loginHandler,
    onLogout: logoutHandler
  }), [isLoggedIn]);

// Присваиваем наш contextValue контексту
  return (
    <AuthContext.Provider value={contextValue}>
      {children}
    </AuthContext.Provider>
  );
};

// 3. Кастомный хук
export const useAuth = () => {
  return useContext(AuthContext);
};

export default AuthContext;
```

#### Файл: `App.jsx`
Максимально чистый код
```JavaScript
import React from 'react';
import { AuthContextProvider } from './store/AuthContext';
import Header from './components/Header';

export default function App() {
  return (
    <AuthContextProvider>
      <Header />
      <main>Контент</main>
    </AuthContextProvider>
  );
}
```

#### Файл: `components/Header.jsx`
Использование через хук.
```JavaScript
import React from 'react';
import { useAuth } from '../store/AuthContext';

export default function Header() {
  const { isLoggedIn, onLogout } = useAuth();
  
  return (
    <header>
      {isLoggedIn && <button onClick={onLogout}>Выйти</button>}
    </header>
  );
}
```



### Продвинутый (Enterprise)
**Подход:** Вместо `useState` используется `useReducer` для сложного управления состоянием. Все лучшие практики включены (защита хука, сайд-эффекты, полная типизация заглушки)

**Когда использовать**
- Сложная логика (загрузка, ошибки, валидация, несколько этапов входа)
- Состояние зависит от предыдущего состояния
- Необходимо четко отслеживать действия (`actions`) в системе


#### Файл: `store/AuthContext.js`
```JavaScript
import React, { useReducer, useEffect, useContext, useMemo } from 'react';

// --- 1. Определение Контекста ---
const AuthContext = React.createContext({
  isLoggedIn: false,
  isLoading: false,
  onLogin: (email, password) => {},
  onLogout: () => {}
});

// --- 2. Логика Reducer'а ---
const defaultState = { isLoggedIn: false, isLoading: false };

const authReducer = (state, action) => {
  switch (action.type) {
    case 'LOGIN_START':
      return { ...state, isLoading: true };
    case 'LOGIN_SUCCESS':
      return { ...state, isLoggedIn: true, isLoading: false };
    case 'LOGOUT':
      return { ...state, isLoggedIn: false };
    default:
      return state;
  }
};

// --- 3. Custom Provider ---
export const AuthContextProvider = (props) => {
  const [authState, dispatch] = useReducer(authReducer, defaultState);

  // Сайд-эффект: проверка при загрузке
  useEffect(() => {
    const storedInfo = localStorage.getItem('isLoggedIn');
    if (storedInfo === '1') {
      dispatch({ type: 'LOGIN_SUCCESS' });
    }
  }, []);

  const loginHandler = () => {
    dispatch({ type: 'LOGIN_START' });
    setTimeout(() => {
      localStorage.setItem('isLoggedIn', '1');
      dispatch({ type: 'LOGIN_SUCCESS' });
    }, 500);
  };

  const logoutHandler = () => {
    localStorage.removeItem('isLoggedIn');
    dispatch({ type: 'LOGOUT' });
  };

  // Оптимизация объекта контекста
  const contextValue = useMemo(() => ({
    isLoggedIn: authState.isLoggedIn,
    isLoading: authState.isLoading,
    onLogin: loginHandler,
    onLogout: logoutHandler
  }), [authState]); 

  return (
    <AuthContext.Provider value={contextValue}>
      {props.children}
    </AuthContext.Provider>
  );
};

// --- 4. Custom Hook ---
export const useAuth = () => {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthContextProvider');
  }
  return context;
};

export default AuthContext;
```

#### Файл: `App.jsx`
```JavaScript
import React from 'react';
import Header from './components/Header';
import { AuthContextProvider } from './store/AuthContext';

export default function App() {
  return (
    <AuthContextProvider>
      <Header />
      <main>
        <h1>Enterprise App</h1>
      </main>
    </AuthContextProvider>
  );
}
```