
Кастомный *UseEffect*


[[Зачем передавать в хуки Лямбду]]

```JSX
import React from 'react';

class UseEffectClassExample extends React.Component {

  constructor(props) {
    super(props);
    this.state = {
      helpText: 'Help text.',
      userData: ''
    };

    this.inputClick = this.inputClick.bind(this);

  }

  componentDidUpdate(prevProp){

    if(this.state.helpText !== "Help"){
      console.log("Some message from componentDidUpdate");
    }
  }

  render() {
    return (
      <div>
        <h2>{this.state.userData}</h2>
        <input onChange={event => this.setState({userData:event.target.value})} placeholder={this.state.helpText} onClick={this.inputClick} onMouseEnter={this.mouseOver}></input>
      </div>);
  }

  inputClick() {
    this.setState({helpText:"Changed"});
    console.log('Clicked!');
  }

  mouseOver = () => console.log('Mouse over!');
}

export default UseEffectClassExample
```


Кастомный хук, который возвращает ширину окна
```JSX
import { useState, useEffect } from 'react';

const useWindowWidth = () => {
  const [windowWidth, setWindowWidth] = useState(window.innerWidth);
  useEffect(() => {
    const handleResize = () => {
      setWindowWidth(window.innerWidth);
    };

    window.addEventListener('resize', handleResize);
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  }, []);

  return windowWidth;
};

export default useWindowWidth;


// Использование
import './App.css'
import useWindowWidth from './hooks/useWindowWidth'

function App() {
  const windowWidth = useWindowWidth('');
  return <div>{windowWidth}</div>
}

export default App
```

useLocalStorage
```JSX
import { useState, useEffect } from "react";

const useLocalStorage = (key, initialValue) => {
  const [value, setValue] = useState(() => {
    try {
      const storedValue = localStorage.getItem(key);
      return storedValue !== null ? JSON.parse(storedValue) : initialValue;
    } catch (error) {
      console.error("Error reading from localStorage", error);
      return initialValue;
    }
  });

  useEffect(() => {
    try {
      localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      console.error("Error writing to localStorage", error);
    }
  }, [key, value]);

  return [value, setValue];
};

export default useLocalStorage;
```

useDebounse
```JSX
import { useState, useEffect } from "react";

const useDebounce = (value, delay) => {

  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {

    const timer = setTimeout(() => {

      setDebouncedValue(value);

    }, delay);

    return () => {

      clearTimeout(timer);

    };

  }, [value, delay]);

  return debouncedValue;

};

export default useDebounce;


// App.jsx
import React, { useState } from "react";

import useDebounce from "./hooks/useDebounce";

function App() {

  const [search, setSearch] = useState("");

  const debouncedSearch = useDebounce(search, 500);

  return (

    <div>

      <input

        type="text"

        value={search}

        placeholder="Search..."

        onChange={(e) => setSearch(e.target.value)}

      />

      <p>Debounced value: {debouncedSearch}</p>

    </div>

  );

}

export default App;
```



Для использования Fetch, я сделал
```JS
import { useEffect, useState } from "react";

export default function useFetch(path)
{
    const [data, setData] = useState();
    useEffect(() => {
        const fetchData = async () => {
            const response = await fetch(path);
            setData(await response.json());
        }
        fetchData();
    }, [path])

    return [data];
}
```