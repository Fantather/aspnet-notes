```js
import { describe, it, expect } from 'vitest';
import { calculateFinalPrice } from '../priceUtils';

describe('calculateFinalPrice', () => {
  it('должна возвращать базовую цену + сервисный сбор, если basePrice > 0', () => {
    expect(calculateFinalPrice(100)).toBe(150);
    expect(calculateFinalPrice(1)).toBe(51);
  });

  it('должна возвращать только сервисный сбор, если basePrice = 0', () => {
    expect(calculateFinalPrice(0)).toBe(50);
  });

  it('должна возвращать только сервисный сбор, если basePrice < 0', () => {
    expect(calculateFinalPrice(-100)).toBe(50);
  });
});
```

**describe** Группирует связанные тесты в один блок. Принимает _название группы_ и _callback-функцию_, внутри которой описываются конкретные тесты (`it`). Помогает структурировать вывод результатов в консоли.

**it / test** Описывает конкретный тестовый сценарий. Принимает _название теста_ (описание ожидаемого поведения) и _функцию_, в которой происходит вызов кода и проверка результата. `it` и `test` — это полные синонимы.

**expect** Функция утверждения (assertion). Она принимает _фактическое значение_ (результат выполнения твоей функции) и возвращает объект «ожидания», к которому применяются матчеры для сравнения с ожидаемым значением.

### Матчеры (Matchers)
**Проверка строгого равенства**
 Использует `toBe`.
 Проверяет *строгое равенство* (аналог оператора `===`)
 Используется для сравнения *примитивных типов данных* (числа, строки, `boolean`, `null`, `undefined`)
 
 Если применить его к объектам или массивам, проверка провалится, так как ссылки на разные объекты в памяти не равны
 ```js
 it("Example", () => {
  expect(2 + 2).toBe(4);
  expect("Wildland").toBe("Wildland");
});
 ```


**Проверка глубокого равенства структур** 
 Использует `toEqual`. Проверяет _глубокое равенство_ (deep equality) структур. Он рекурсивно сравнивает все поля объектов или элементы массивов, игнорируя ссылки в памяти. Используется всегда, когда нужно проверить содержимое объектов, массивов или экземпляров классов
```js
const user = { name: "Alex", app: "Wildland" };
const sameUser = { name: "Alex", app: "Wildland" };

it("Example", () => {
  // Ошибка! Ссылки разные
  expect(user).toBe(sameUser);

  // Успех! Содержимое одинаковое
  expect(user).toEqual(sameUser);
});
```


**Проверка приведения к булеву типу** Использует `toBeFalsy` / `toBeTruthy`. Проверяют, приводится ли значение к `false` или `true` в _булевом контексте_. Это слабая проверка. `toBeFalsy` проходит для: `false`, `0`, `""` (пустая строка), `null`, `undefined`, `NaN` `toBeTruthy` проходит для всего остального (включая пустые объекты `{}` и массивы `[]`)
  ```js
  it("Example", () => {
  expect(null).toBeFalsy();
  expect("Hello").toBeTruthy();
});
  ```


**Проверка наличия элемента в массиве или подстроки** Использует `toContain`. Проверяет, содержит ли массив указанный элемент или содержит ли строка указанную подстроку
```js
it("Example", () => {
  const tours = ["Safari", "Mountain", "Sea"];
  expect(tours).toContain("Safari");
});
```


**Отрицание проверки (Инверсия)** Использует `.not`. Позволяет инвертировать любой другой матчер, проверяя, что условие _не_ выполняется
```js
it("Example", () => {
  expect(2 + 2).not.toBe(5);
});
```


**Проверка существования значения** Использует `toBeUndefined` / `toBeDefined`. Полезно для проверки того, была ли переменная инициализирована или вернула ли функция значение
```js
const value = "Apple";

it("Example", () => {
  expect(value).toBeDefined();
  expect(valueSecond).toBeUndefined();
});
```


**Проверка на пустую ссылку (null)** Использует `toBeNull`. Строго проверяет, что значение равно `null`. Важно отличать от `undefined`
```js
let value = null;

it("Example", () => {
  expect(value).toBeNull();
});
```


**Числовые сравнения** Использует группу матчеров для математических операций сравнения
```js
it("Example", () => {
  expect(10).toBeGreaterThan(5);
  expect(5).toBeLessThan(10);
  expect(10).toBeGreaterThanOrEqual(10);
  expect(8).toBeLessThanOrEqual(8);
});
```


**Проверка по регулярному выражению** Использует `toMatch`. Проверяет соответствие строки регулярному выражению (Regex) или другой подстроке
```js
it("Example", () => {
  expect("Wildland Tour").toMatch(/Tour/);
  expect("Hello World").toMatch("World");
});
```


**Проверка размера коллекции** Использует `toHaveLength`. Проверяет свойство `.length` у массивов или строк
```js
it("Example", () => {
  expect([1, 2, 3]).toHaveLength(3);
  expect("Wildland").toHaveLength(8);
});
```


**Проверка структуры объекта** Использует `toHaveProperty`. Проверяет, есть ли у объекта ключ с определенным именем и (опционально) определенным значением
```js
it("Example", () => {
  const user = { name: "Alex", app: "Wildland", age: 25 };
  expect(user).toHaveProperty("name");
  expect(user).toHaveProperty("age", 25);
});
```


**Проверка выброса ошибки**
  Использует `toThrow`. Проверяет, что функция выбрасывает исключение при вызове.
  *Важно*: внутрь `expect` нужно передавать саму функцию (ссылку на неё) или заворачивать вызов в анонимную стрелочную функцию. Если вызвать её напрямую, тест упадет с ошибкой до проверки. Можно проверять сам факт ошибки, точное совпадение текста или частичное совпадение (Regex)
```js
it("Example", () => {
  function boom() {
    throw new Error("Explosion!");
  }

  // Передаем ссылку на функцию, не вызывая её ()
  expect(boom).toThrow();
  expect(boom).toThrow("Explosion!");
  expect(boom).toThrow(/Expl/);
});
```


**Проверка принадлежности к классу** Использует `toBeInstanceOf`. Проверяет, был ли объект создан с помощью указанного класса или конструктора (аналог оператора `instanceof` в JavaScript). Используется, когда важно убедиться, что результат имеет правильный тип в объектно-ориентированном коде
```js
it("Example", () => {
  class Tour {}
  const safari = new Tour();
  expect(safari).toBeInstanceOf(Tour);
});
```