Один useEffect Должен отвечать за одну задачу

**Плохой пример**
- User запрашивается при каждом изменении размера окна
- В одном useEffect запрашиваются данные и находятся инструкции для монтирования и при размонтировании 
```jsx
import React, { useState, useEffect } from "react";

export default function App() {
  const [postId, setPostId] = useState(1);

  return (
    <div style={{ padding: 20 }}>
      <h1>Async Data Fetcher</h1>
      <DataFetcher postId={postId} />
      <div style={{ marginTop: 20 }}>
        <label>
          Select Post ID:
          <select
            value={postId}
            onChange={(e) => setPostId(Number(e.target.value))}
            style={{ marginLeft: 8, padding: 4 }}
          >
            <option value={1}>1</option>
            <option value={2}>2</option>
            <option value={3}>3</option>
            <option value={4}>4</option>
            <option value={5}>5</option>
          </select>
        </label>
      </div>
    </div>
  );
}

function DataFetcher({ postId }) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // 1. Асинхронная функция внутри эффекта
    const fetchData = async () => {
      setLoading(true);
      
      try {
        const response = await fetch(
          `[https://jsonplaceholder.typicode.com/posts/](https://jsonplaceholder.typicode.com/posts/ "https://jsonplaceholder.typicode.com/posts/")${postId}`
        );
        const result = await response.json();
        setData(result);
      } catch (error) {
        console.error("Ошибка при загрузке данных:", error);
        setData(null);
      } finally {
        setLoading(false);
      }
    };

    fetchData();

    // 2. Очистка: здесь могла бы быть логика отмены запроса с AbortController
    return () => {};
  }, [postId]);
  if (loading) return <div>Loading...</div>;
  if (!data) return <div>No data available</div>;
  
  return (
    <div
      style={{
        marginTop: 12,
        padding: 12,
        background: "#f4f4f4",
        borderRadius: 12,
      }}
    >
      <h2>{data.title}</h2>
      <p>{data.body}</p>
    </div>
  );
}
```

**Хороший пример**
```jsx
import React, { useState, useEffect } from "react";

// Simple mock function to simulate an API call

const fetchUser = async (id) => {

  const response = await fetch(

    `[https://jsonplaceholder.typicode.com/users/](https://jsonplaceholder.typicode.com/users/ "https://jsonplaceholder.typicode.com/users/")${id}`

  );

  return response.json();

};

const App = () => {

  const [id, setId] = useState(1);

  const [user, setUser] = useState(null);

  const [windowWidth, setWindowWidth] = useState(window.innerWidth);

  useEffect(() => {

    // 1. Logic for fetching data

    console.log(`Fetching data for user ID: ${id}...`);

    fetchUser(id).then((data) => setUser(data));

    // 2. Logic for handling window resize

    const handleResize = () => {

      console.log("Window resized!");

      setWindowWidth(window.innerWidth);

    };

    window.addEventListener("resize", handleResize);

    // 3. Cleanup function

    return () => {

      console.log("Cleaning up effect...");

      window.removeEventListener("resize", handleResize);

    };

  }, [id]); 

  return (

    <div style={{ padding: "20px", fontFamily: "sans-serif" }}>

      <h1>User Dashboard</h1>

      <p>

        Current Window Width: <strong>{windowWidth}px</strong>

      </p>

      <hr />

      <div style={{ marginBottom: "20px" }}>

        <button onClick={() => setId((prev) => (prev > 1 ? prev - 1 : 1))}>

          Previous User

        </button>

        <span style={{ margin: "0 15px" }}>User ID: {id}</span>

        <button onClick={() => setId((prev) => prev + 1)}>Next User</button>

      </div>

      {user ? (

        <div

          style={{

            border: "1px solid #ccc",

            padding: "15px",

            borderRadius: "8px",

          }}

        >

          <h3>Name: {user.name}</h3>

          <p>Email: {user.email}</p>

          <p>City: {user.address?.city}</p>

        </div>

      ) : (

        <p>Loading user data...</p>

      )}

    </div>

  );

};

export default App;  **// 1. Эффект для данных (зависит от id)**

  **useEffect(() => {**

    **console.log(****`Fetching user** **${id}****`****);**

    **fetchUser(id).then(setUser);**

  **}, [id]);**

  **// 2. Эффект для resize (один раз)**

  **useEffect(() => {**

    **const handleResize = () => {**

      **setWindowWidth(window.innerWidth);**

    **};**

    **window.addEventListener(****"resize"****, handleResize);**

    **return () => {**

      **window.removeEventListener(****"resize"****, handleResize);**

    **};**

  **}, []);**
```