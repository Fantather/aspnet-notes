```JSX
import { Component } from "react";

class TodoApp extends Component {

  state = {

    tasks: [],

    newTask: "",

    editTaskId: null,

    editTaskTitle: "",

  };

  componentDidMount() {

    // Загружаем задачи из localStorage

    const tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    this.setState({ tasks });

  }

  componentDidUpdate(prevProps, prevState) {

    // Сохраняем задачи в localStorage при изменении

    if (prevState.tasks !== this.state.tasks) {

      localStorage.setItem("tasks", JSON.stringify(this.state.tasks));

    }

  }

  handleInputChange = (e) => {

    this.setState({ newTask: e.target.value });

  };

  handleEditChange = (e) => {

    this.setState({ editTaskTitle: e.target.value });

  };

  addTask = () => {

    const { newTask, tasks } = this.state;

    if (newTask.trim() === "") return;

    const task = {

      id: Date.now(),

      title: newTask,

      done: false,

    };

    this.setState({

      tasks: [...tasks, task],

      newTask: "",

    });

  };

  toggleTask = (id) => {

    this.setState((prevState) => ({

      tasks: prevState.tasks.map((task) =>

        task.id === id ? { ...task, done: !task.done } : task

      ),

    }));

  };

  deleteTask = (id) => {

    this.setState((prevState) => ({

      tasks: prevState.tasks.filter((task) => task.id !== id),

    }));

  };

  startEditTask = (task) => {

    this.setState({

      editTaskId: task.id,

      editTaskTitle: task.title,

    });

  };

  saveEditTask = () => {

    const { editTaskId, editTaskTitle } = this.state;

    if (editTaskTitle.trim() === "") return;

    this.setState((prevState) => ({

      tasks: prevState.tasks.map((task) =>

        task.id === editTaskId ? { ...task, title: editTaskTitle } : task

      ),

      editTaskId: null,

      editTaskTitle: "",

    }));

  };

  cancelEdit = () => {

    this.setState({

      editTaskId: null,

      editTaskTitle: "",

    });

  };

  render() {

    const { tasks, newTask, editTaskId, editTaskTitle } = this.state;

    return (

      <div>

        <h2>Todo List</h2>

        <input

          type="text"

          value={newTask}

          onChange={this.handleInputChange}

          placeholder="Add a new task"

        />

        <button onClick={this.addTask}>Add Task</button>

        <ul>

          {tasks.map((task) => (

            <li key={task.id} style={{ marginBottom: "8px" }}>

              {editTaskId === task.id ? (

                <>

                  <input

                    type="text"

                    value={editTaskTitle}

                    onChange={this.handleEditChange}

                  />

                  <button onClick={this.saveEditTask}>Save</button>

                  <button onClick={this.cancelEdit}>Cancel</button>

                </>

              ) : (

                <>

                  <span

                    onClick={() => this.toggleTask(task.id)}

                    style={{

                      textDecoration: task.done ? "line-through" : "none",

                      cursor: "pointer",

                      marginRight: "8px",

                    }}

                  >

                    {task.title}

                  </span>

                  <button onClick={() => this.startEditTask(task)}>Edit</button>

                  <button onClick={() => this.deleteTask(task.id)}>

                    Delete

                  </button>

                </>

              )}

            </li>

          ))}

        </ul>

      </div>

    );

  }

}

  

export default function App()

{

  return <div>

    <TodoApp />

  </div>

}
```


 