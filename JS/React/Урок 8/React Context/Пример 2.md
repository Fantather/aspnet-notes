```JSX
import React, { useState, useContext, createContext } from "react";

// 1. Create the context that will store both the state and the function

export const ThemeContext = createContext({

  theme: "light",

  toggleTheme: () => {},

});

// 2. Provider (Parent)

function ThemeProvider({ children }) {

  const [theme, setTheme] = useState("light");

  const toggleTheme = () => {

    setTheme((current) => (current === "light" ? "dark" : "light"));

  };

  const contextValue = { theme, toggleTheme };

  return (

    <ThemeContext.Provider value={contextValue}>

      {children}

    </ThemeContext.Provider>

  );

}

// 3. Consumer (Deep nested button)

function ThemeSwitcher() {

  const { theme, toggleTheme } = useContext(ThemeContext);

  return (

    <button onClick={toggleTheme} className={theme}>

      Current theme: {theme}

    </button>

  );

}

// 4. App wrapped with provider

function App() {

  return (

    <ThemeProvider>

      <div>

        <ThemeSwitcher />

      </div>

    </ThemeProvider>

  );

}

export default App;
```