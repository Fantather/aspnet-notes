____

![[Pasted image 20251106181727.png]]
**Глобальное Лексическое Окружение (Global Lexical Environment)** — это, по сути, "словарь" всех переменных, доступных в самой верхней, глобальной области видимости вашего кода.

Как правильно показано на схеме, этот "словарь" состоит из двух разных частей:

1. **Object Environment Record (Запись окружения-объекта)**
    
    - Сюда попадают "старые" объявления: `var` и `function`.
        
    - Главная особенность: Эта часть **напрямую связана** с глобальным объектом (`window` в браузере, который и есть `globalThis`).
        
    - **Вот почему**, когда вы пишете `var myVar = 10;`, вы автоматически создаете свойство `window.myVar`. Они — одно и то же.
        
2. **Declarative Environment Record (Декларативная запись окружения)**
    
    - Сюда попадают "новые" (ES6+) объявления: `let`, `const` и `class`.
        
    - Главная особенность: Эта часть **не связана** с глобальным объектом. Переменные просто существуют в этой отдельной "декларативной" области.
        
    - **И вот почему**, когда пишется `let myLet = 20;`, `window.myLet` (или `globalThis.myLet`) будет `undefined`.
___
## Области видимости: Глобальная и Функциональная

Это классические типы области видимости, с которыми работает `var`.

### **Глобальная область видимости (Global Scope)**

- **Что это?** Это самая "внешняя", верхняя область видимости вашего кода.
    
- **Когда?** Переменная попадает в нее, если она объявлена **вне любых функций**.
    
- **Доступ:** Переменные в этой области доступны **абсолютно везде** в коде (внутри любых функций, блоков и т.д.).
    
- **Связь с `var`:** `var`, объявленный в этой области, становится свойством глобального объекта (`globalThis` / `window`).
    ![[Pasted image 20251106183228.png]]
    

### **Функциональная область видимости (Function Scope)**

- **Что это?** Это область видимости, которая создается **внутри функции**.
    
- **Когда?** Переменная (объявленная с `var`) попадает в нее, если она объявлена **внутри** какой-либо функции.
    
- **Доступ:** Такие переменные "заперты" внутри своей функции. Они доступны **только** внутри этой функции (и внутри вложенных в нее функций), но **недоступны** снаружи.
- 
## **Блочная область видимости (Block Scope)**

**Блочная область видимости** — это та область видимости, в которой "живут" переменные, объявленные с помощью `let` и `const`.

"Блок" — это любой код, заключенный в фигурные скобки `{...}`.

К блокам относятся:

- Условия `if`, `else if`, `else`
    
- Циклы `for`, `while`, `do...while`
    
- Даже просто пара фигурных скобок, стоящая отдельно в коде.
    

Переменная, объявленная с `let` или `const` внутри такого блока, **видна только внутри этого блока** и не существует за его пределами.

```c#
if (true) {
  let blockVar = "Я виден только в этом блоке if";
  console.log(blockVar); // Выведет: "Я виден только в этом блоке if"
}

// Попытка доступа снаружи блока
// console.log(blockVar); 
// ОШИБКА: ReferenceError: blockVar is not defined
```

