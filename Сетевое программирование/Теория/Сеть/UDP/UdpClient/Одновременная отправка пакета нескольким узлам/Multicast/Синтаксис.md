#### Отправитель
```C#
IPAdress multicastAddress = IPAdress.Parse("239.0.0.1");
int multicastPort = 8001;

UdpClient sender = new UdpClient();

// Отправка, если устанавливать Connect
sender.Connect(multicastAddress, multicastPort);
byte[] data = ...; // твои данные
sender.Send(data, data.Length);

// Отправка без Connect
IPEndPoint targetEndPoint = new IPEndPoint(multicastAddress, multicastPort);
byte[] data = ...;
sender.Send(data, data.Length, targetEndPoint);
```
`multicastAddress` - адрес, который прослушивают адресаты
`multicastPort` - порт, который прослушивают адресаты
Эти два параметра обязаны совпадать с таковыми у адресатов, иначе сообщение не дойдёт


#### Получатель
```C#
// Устанавливаем IPAdress с которого будут вещать и порт, который мы будем прослушивать
IPAddress multicastAddress = IPAddress.Parse("239.0.0.1");
int multicastPort = 8001;

UdpClient receiver = new UdpClient();

// Настраиваем объект UdpClient
receiver.ExclusiveAddressUse = false;
receiver.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReussAdress, true);

try
{
	// Начинаем принимать multicast рассылку
	receiver.JoinMulticastGroup(multicastAddress);
	
	
	// Цикл приёма рассылки
	IPEndPoint remoteIp = null; // Здесь будет информация об отправителе
	while (true)
	{
	    byte[] data = receiver.Receive(ref remoteIp);
	    Console.WriteLine($"Получено {data.Length} байт от {remoteIp}");
	    // Что-то делаем с 'data'...
	}
}

catch (Exception ex)
{
    Console.WriteLine(ex.Message);
}

// Покидаем группу и закрываем клиент
finally
{
    udpClient.DropMulticastGroup(multicastAddress);
    udpClient.Close();
}
```

`receiver.ExclusiveAddressUse = false;` - Говорит UdpClient не запрещать одновременное использование порта
`receiver.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReussAdress, true);` - Говорит ОС не запрещать одновременное использование порта
И то и другое нужно указывать, что бы исключить шанс запрета на любом уровне

`udpClient.DropMulticastGroup(multicastAddress);` - Прекращает прослушивание рассылки
Всегда нужно гарантировать прекращение прослушивания, через finally на пример
Пусть Close тоже прерывает прослушивание, использовать Multicast является хорошим тоном

`udpClient.Close();` - Освобождает UdpClient, Dispose под капотом
