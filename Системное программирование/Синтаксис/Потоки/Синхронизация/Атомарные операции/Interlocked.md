
### üîπ 1. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `Interlocked.CompareExchange`

–ú–µ—Ç–æ–¥:

```csharp
Interlocked.CompareExchange(ref location, newValue, comparand)
```

—Ä–∞–±–æ—Ç–∞–µ—Ç **–∞—Ç–æ–º–∞—Ä–Ω–æ** (—Ç–æ –µ—Å—Ç—å –Ω–µ–¥–µ–ª–∏–º–æ, –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –¥—Ä—É–≥–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏).

–û–Ω –¥–µ–ª–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

1. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `location` —Å `comparand`.
    
2. –ï—Å–ª–∏ –æ–Ω–∏ **—Ä–∞–≤–Ω—ã**, —Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ `location` –∑–Ω–∞—á–µ–Ω–∏–µ `newValue`.
    
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ** `location`.


### üîπ 2. –í —Ç–≤–æ—ë–º —Å–ª—É—á–∞–µ:

```csharp
if (Interlocked.CompareExchange(ref _winnerFound, 1, 0) == 0)
```

–ó–¥–µ—Å—å:

- `_winnerFound` ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –Ω–∞–ø—Ä–∏–º–µ—Ä `int _winnerFound = 0;`
    
- `1` ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã —Ö–æ—Ç–∏–º –∑–∞–ø–∏—Å–∞—Ç—å, –µ—Å–ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –µ—â—ë –Ω–µ –±—ã–ª–æ
    
- `0` ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –æ–∂–∏–¥–∞–µ–º —É–≤–∏–¥–µ—Ç—å, –µ—Å–ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –µ—â—ë **–Ω–µ –Ω–∞—à–ª–∏**


### üîπ 3. –ö–∞–∫ —ç—Ç–æ —á–∏—Ç–∞–µ—Ç—Å—è –ø–æ —Å–º—ã—Å–ª—É:

> ‚Äú–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `_winnerFound` –±—ã–ª–æ 0, —Ç–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç—É–¥–∞ 1 –∏ –≤–µ—Ä–Ω—É—Ç—å 0 ‚Äî –∑–Ω–∞—á–∏—Ç, —è —Å—Ç–∞–ª –ø–µ—Ä–≤—ã–º, –∫—Ç–æ —ç—Ç–æ —Å–¥–µ–ª–∞–ª.‚Äù

–¢–æ –µ—Å—Ç—å, **—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –ø–æ—Ç–æ–∫**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—à—ë–ª —Å—é–¥–∞, —É–≤–∏–¥–∏—Ç `CompareExchange(...) == 0`.  
–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ —É–∂–µ —É–≤–∏–¥—è—Ç, —á—Ç–æ `_winnerFound` —Å—Ç–∞–ª–æ 1, –∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è


### üîπ 4. –ü—Ä–∏–º–µ—Ä –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏

```csharp
private int _winnerFound = 0;

void TryDeclareWinner(string name)
{
    if (Interlocked.CompareExchange(ref _winnerFound, 1, 0) == 0)
    {
        Console.WriteLine($"{name} –ø–æ–±–µ–¥–∏–ª!");
    }
    else
    {
        Console.WriteLine($"{name} –æ–ø–æ–∑–¥–∞–ª...");
    }
}
```

–ï—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ —Å —ç—Ç–∏–º –º–µ—Ç–æ–¥–æ–º, —Ç–æ–ª—å–∫–æ **–æ–¥–∏–Ω** –Ω–∞–ø–µ—á–∞—Ç–∞–µ—Ç `"–ø–æ–±–µ–¥–∏–ª!"`, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî `"–æ–ø–æ–∑–¥–∞–ª..."`.